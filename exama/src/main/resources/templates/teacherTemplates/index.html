<html lang="DE" xmlns:th="http://www.thymeleaf.org"
    xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">

<head th:include="fragments/head :: head"></head>

<body>
    <div id="wrapper">
        <!-- header with navigation (only desktop and tablet), title and logout-button -->
        <div th:include="fragments/header :: header"></div>

        <div th:include="fragments/coursenavigation :: coursenavigation"></div>

        <!-- content displayed in the center of the window -->
        <div id="content-wrapper">
            <div class="welcome-text">Willkommen <b><span sec:authentication="name"></span></b>!</div>

            <div class="content-box-half">
                <div class="content-box-header">
                    Hausaufgabe setzen
                </div>
                <div class="content-box-content">
                    <form th:action="@{/homeworks/modified}" th:object="${homework}" method="post">

                        <div class="homework-start homework-start-course">
                            <select class="form-control" id="course" name="course" th:with="course=*{course}" required>
                                <option th:selected="true" th:disabled="disabled" value="0">Kurs*</option>
                                <option th:each="course : ${allCourses}" th:text="${course.name}"
                                    th:value="${course.id}" th:selected="false" />
                            </select>
                        </div>

                        <div class="homework-start homework-start-duedate">
                            <input type="text" id="toDate" class="form-control" required placeholder="zu erledigen bis*"
                                th:field="*{dueDate}" />
                        </div>



                        <div class="homework-start exam-start-name">
                            <input type="text" class="form-control" maxlength="20" required
                                placeholder="Kurzbeschreibung*" th:field="*{name}" />
                        </div>


                        <div class="homework-start exam-start-description">
                            <textarea class="form-control" rows="5" placeholder="zusätzliche Informationen"
                                maxlength="4095"></textarea>
                        </div>

                        <div class="homework-start homework-start-workloadminutes">
                            <input type="text" class="form-control" th:minlength="1" th:maxlength="4"
                                th:attr="placeholder='Arbeitsaufwand (Minuten)*'" th:field="*{workloadMinutesTotal}"
                                required />
                        </div>

                        <div class="homework-start homework-start-distribution">
                            <select class="form-control" id="workloadDistribution" name="workloadDistribution"
                                th:with="workloadDistribution=*{workloadDistribution}" required>
                                <option th:selected="true" th:disabled="disabled" value="0">Verteilung des Aufwands*
                                </option>
                                <option th:each="dist : ${allWorkloadDistributions}" th:text="${dist.name}"
                                    th:value="${dist.id}" />
                            </select>
                        </div>

                        <div>
                            <button type="submit" class="save-button">Hausaufgabe setzen</button>
                        </div>
                    </form>
                </div>
            </div>

            <div class="content-box-half">
                <div class="content-box-header">
                    Leistungsüberprüfung setzen
                </div>
                <div class="content-box-content">
                    <form th:action="@{/exams/modified}" th:object="${exam}" method="post">
                        <input type="hidden" th:field="*{semester}" th:value="${exam.semester}" />

                        <div class="exam-start exam-start-course">
                            <select class="form-control" id="course" name="course" th:with="course=*{course}" required>
                                <option th:selected="true" th:disabled="disabled" value="0">Kurs*</option>
                                <option th:each="course : ${allCourses}" th:text="${course.name}"
                                    th:value="${course.id}" th:selected="false" />
                            </select>
                        </div>


                        <div class="exam-start exam-start-duedate">
                            <input type="text" id="toDate2" class="form-control" required
                                placeholder="Abgabe-/Prüfungsdatum*" th:field="*{dueDate}" />
                        </div>


                        <div class="exam-start exam-start-type">
                            <select class="form-control" id="examType" name="examType" th:with="examType=*{examType}"
                                required>
                                <option th:selected="true" th:disabled="disabled" value="0">Prüfungstyp*</option>
                                <option th:each="type : ${allExamTypes}"
                                    th:text="${type.name + ' (' + type.timeValue + ' h)'}" th:value="${type.id}" />
                            </select>
                        </div>


                        <div class="exam-start exam-start-name">
                            <input type="text" class="form-control" maxlength="20" required placeholder="Name/Thema*"
                                th:field="*{name}" />
                        </div>


                        <div class="exam-start exam-start-description">
                            <textarea class="form-control" rows="5" placeholder="Beschreibung/Lernziele"
                                maxlength="4095"></textarea>
                        </div>

                        <div class="exam-start exam-start-preptime">
                            <select class="form-control" id="availablePrepTime" name="availablePrepTime"
                                th:with="availablePrepTime=*{availablePrepTime}" required>
                                <option th:selected="true" th:disabled="disabled" value="0">Vorbereitungszeit*</option>
                                <option th:each="preptime : ${allPrepTimes}" th:text="${preptime.name}"
                                    th:value="${preptime.id}" />
                            </select>
                        </div>


                        <div class="exam-start exam-start-distribution">
                            <select class="form-control" id="workloadDistribution" name="workloadDistribution"
                                th:with="workloadDistribution=*{workloadDistribution}" required>
                                <option th:selected="true" th:disabled="disabled" value="0">Verteilung des Aufwands*
                                </option>
                                <option th:each="dist : ${allWorkloadDistributions}" th:text="${dist.name}"
                                    th:value="${dist.id}" />
                            </select>
                        </div>


                        <div class="exam-start exam-start-factor">
                            <input placeholder="Gewichtung" type="number" class="form-control" min="0.5" max="3.0"
                                step="0.5" required th:field="*{countingFactor}" />
                        </div>

                        <div class="optionalParametersTitle">> Startdatum / Arbeitsaufwand selbst festlegen</div>
                        <div class="optionalParameters">
                            <div class="exam-start exam-start-startdate">
                                <input type="text" id="fromDate" class="form-control" th:attr="placeholder='Startdatum'"
                                    th:field="*{startDate}" />
                            </div>

                            <div class="exam-start exam-start-workloadminutes">
                                <input type="text" class="form-control" th:minlength="1" th:maxlength="4"
                                    th:attr="placeholder='Arbeitsaufwand (Minuten)'"
                                    th:field="*{workloadMinutesTotal}" />
                            </div>
                        </div>


                        <div>
                            <button type="submit" class="save-button">Leistungsüberprüfung setzen</button>
                        </div>
                    </form>
                </div>
            </div>



        </div>

        <script>
            $(".optionalParametersTitle").click(function () {
                $(".optionalParameters").slideToggle();
            });

            var startdate = $("#fromDate");
            var preptime = $("#availablePrepTime");
            $(startdate).change(function () {
                if (startdate.val()) {
                    preptime.val(1);
                }
            });
            $(preptime).change(function () {
                if (preptime.val()!=1) {
                    startdate.val(null);
                }
            });
        </script>
        <!-- footer with navigation (only mobile) -->
        <div th:include="fragments/footer :: footer">
        </div>
</body>

</html>